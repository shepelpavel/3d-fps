(function(){"use strict";var e={6040:function(e,t,o){var n=o(7195),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"container"}})},a=[],c=(o(560),o(7471)),d=o(8606),i=o(182);const s=(e,t)=>{const o=new c.dpR;o.load(e,(function(e){e.mapping=c.dSO,e.colorSpace=c.KI_,t(e)}))},l=e=>{const t=new c.vmT(9290206,26253,1.5);t.position.set(2,1,1),e.add(t)},p=e=>{const t=new c.Ox3(16771291,3);t.position.set(-25,25,10),t.castShadow=!0,t.shadow.camera.near=.01,t.shadow.camera.far=500,t.shadow.camera.right=30,t.shadow.camera.left=-30,t.shadow.camera.top=30,t.shadow.camera.bottom=-30,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,t.shadow.radius=4,t.shadow.bias=0,e.add(t)};var u=o(3371),w=o(2056);const m=(e,t)=>{const o=(new u.E).setPath("/models/"),n=new c.dpR;n.load("/textures/Area1/ground.png",(function(n){n.colorSpace=c.KI_,n.wrapS=n.wrapT=c.rpg,n.offset.set(0,0),n.repeat.set(50,50),o.load("Area1/ground.glb",(o=>{e.add(o.scene),t.fromGraphNode(o.scene),o.scene.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material.map=n)}));const r=new w.u(t);r.visible=!1,e.add(r)}))}))},f=(e,t)=>{const o=(new u.E).setPath("/models/"),n=(new c.dpR).load("/textures/Area1/home1.jpg");n.wrapS=c.rpg,n.wrapT=c.rpg,n.offset.set(0,0),n.repeat.set(10,10);const r=(new c.dpR).load("/textures/Area1/home1_normal.jpg");r.wrapS=c.rpg,r.wrapT=c.rpg,r.offset.set(0,0),r.repeat.set(10,10),o.load("Area1/home1.glb",(o=>{o.scene.position.set(2,0,-10),e.add(o.scene),t.fromGraphNode(o.scene),o.scene.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material.map=n,e.material.normalMap=r,e.material.normalScale.set(2,2))}));let a=new w.u(t);a.visible=!1,e.add(a)}))},h=(e,t)=>{const o=(new u.E).setPath("/models/");o.load("Area1/home2.glb",(o=>{o.scene.position.set(20,0,-30),e.add(o.scene),t.fromGraphNode(o.scene),o.scene.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}));const n=new w.u(t);n.visible=!1,e.add(n)}))},y=(e,t)=>{const o=(new u.E).setPath("/models/"),n=(new c.dpR).load("/textures/Area1/home1.jpg");n.wrapS=c.rpg,n.wrapT=c.rpg,n.offset.set(0,0),n.repeat.set(10,10);const r=(new c.dpR).load("/textures/Area1/home1_normal.jpg");r.wrapS=c.rpg,r.wrapT=c.rpg,r.offset.set(0,0),r.repeat.set(10,10),o.load("Area1/home1.glb",(o=>{o.scene.position.set(-20,0,-20),e.add(o.scene),t.fromGraphNode(o.scene),o.scene.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material.map=n,e.material.normalMap=r,e.material.normalScale.set(2,2))}));let a=new w.u(t);a.visible=!1,e.add(a)}))},v=(e,t,o,n,r,a)=>{const c=e*(n?25:8);t["KeyW"]&&o.add(r().multiplyScalar(c)),t["KeyS"]&&o.add(r().multiplyScalar(-c)),t["KeyA"]&&o.add(a().multiplyScalar(-c)),t["KeyD"]&&o.add(a().multiplyScalar(c)),n&&t["Space"]&&(o.y=8)},S=(e,t)=>{window.addEventListener("resize",(()=>{o(e,t)}));const o=(e,t)=>{e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}},g=()=>{const e=new c.SUY,t=new c.xsS;s("/textures/Area1/bck.jpg",(e=>{t.background=e})),l(t),p(t),t.fog=new c.ybr(0,0,50);const o=new c.cPb(70,window.innerWidth/window.innerHeight,.1,1e3);o.rotation.order="YXZ";const n=document.getElementById("container"),r=new c.CP7({antialias:!0});r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.shadowMap.type=c.dwk,r.toneMapping=c.LY2,n.appendChild(r.domElement);const a=30,u=100,w=.2,g=5,b=new c.cJO(w,5),P=new c.YBo({color:14605965}),x=[];let M=0;for(let d=0;d<u;d++){const e=new c.Kj0(b,P);e.castShadow=!0,e.receiveShadow=!0,t.add(e),x.push({mesh:e,collider:new c.aLr(new c.Pa4(0,-100,0),w),velocity:new c.Pa4})}const E=new d.V,O=new i.s(new c.Pa4(0,.35,0),new c.Pa4(0,1,0),.35),V=new c.Pa4,j=new c.Pa4;let k=!1,A=0;const _={},L=new c.Pa4,T=new c.Pa4,z=new c.Pa4;function R(){const e=x[M];o.getWorldDirection(j),e.collider.center.copy(O.end).addScaledVector(j,1.5*O.radius);const t=15+30*(1-Math.exp(.001*(A-performance.now())));e.velocity.copy(j).multiplyScalar(t),e.velocity.addScaledVector(V,2),M=(M+1)%x.length}function W(){const e=E.capsuleIntersect(O);k=!1,e&&(k=e.normal.y>0,k||V.addScaledVector(e.normal,-e.normal.dot(V)),O.translate(e.normal.multiplyScalar(e.depth)))}function K(e){let t=Math.exp(-4*e)-1;k||(V.y-=a*e,t*=.1),V.addScaledVector(V,t);const n=V.clone().multiplyScalar(e);O.translate(n),W(),o.position.copy(O.end)}function q(e){const t=L.addVectors(O.start,O.end).multiplyScalar(.5),o=e.collider.center,n=O.radius+e.collider.radius,r=n*n;for(const a of[O.start,O.end,t]){const t=a.distanceToSquared(o);if(t<r){const r=L.subVectors(a,o).normalize(),c=T.copy(r).multiplyScalar(r.dot(V)),d=z.copy(r).multiplyScalar(r.dot(e.velocity));V.add(d).sub(c),e.velocity.add(c).sub(d);const i=(n-Math.sqrt(t))/2;o.addScaledVector(r,-i)}}}function D(){for(let e=0,t=x.length;e<t;e++){const o=x[e];for(let n=e+1;n<t;n++){const e=x[n],t=o.collider.center.distanceToSquared(e.collider.center),r=o.collider.radius+e.collider.radius,a=r*r;if(t<a){const n=L.subVectors(o.collider.center,e.collider.center).normalize(),a=T.copy(n).multiplyScalar(n.dot(o.velocity)),c=z.copy(n).multiplyScalar(n.dot(e.velocity));o.velocity.add(c).sub(a),e.velocity.add(a).sub(c);const d=(r-Math.sqrt(t))/2;o.collider.center.addScaledVector(n,d),e.collider.center.addScaledVector(n,-d)}}}}function I(e){x.forEach((t=>{t.collider.center.addScaledVector(t.velocity,e);const o=E.sphereIntersect(t.collider);o?(t.velocity.addScaledVector(o.normal,1.5*-o.normal.dot(t.velocity)),t.collider.center.add(o.normal.multiplyScalar(o.depth))):t.velocity.y-=a*e;const n=Math.exp(-1.5*e)-1;t.velocity.addScaledVector(t.velocity,n),q(t)})),D();for(const t of x)t.mesh.position.copy(t.collider.center)}function Y(){return o.getWorldDirection(j),j.y=0,j.normalize(),j}function C(){return o.getWorldDirection(j),j.y=0,j.normalize(),j.cross(o.up),j}function G(){o.position.y<=-50&&(O.start.set(0,.35,0),O.end.set(0,1,0),O.radius=.35,o.position.copy(O.end),o.rotation.set(0,0,0))}function H(){const n=Math.min(.05,e.getDelta())/g;for(let e=0;e<g;e++)v(n,_,V,k,Y,C),K(n),I(n),G();r.render(t,o),requestAnimationFrame(H)}document.addEventListener("keydown",(e=>{_[e.code]=!0})),document.addEventListener("keyup",(e=>{_[e.code]=!1})),n.addEventListener("mousedown",(()=>{document.body.requestPointerLock(),A=performance.now()})),document.addEventListener("mouseup",(()=>{null!==document.pointerLockElement&&R()})),document.body.addEventListener("mousemove",(e=>{document.pointerLockElement===document.body&&(o.rotation.y-=e.movementX/500,o.rotation.x-=e.movementY/500)})),S(o,r),m(t,E),f(t,E),h(t,E),y(t,E),H()};var b={name:"App",mounted(){g()}},P=b,x=o(1001),M=(0,x.Z)(P,r,a,!1,null,null,null),E=M.exports;n.ZP.config.productionTip=!1,new n.ZP({render:e=>e(E)}).$mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,a){if(!n){var c=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],a=e[l][2];for(var d=!0,i=0;i<n.length;i++)(!1&a||c>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(d=!1,a<c&&(c=a));if(d){e.splice(l--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,c=n[0],d=n[1],i=n[2],s=0;if(c.some((function(t){return 0!==e[t]}))){for(r in d)o.o(d,r)&&(o.m[r]=d[r]);if(i)var l=i(o)}for(t&&t(n);s<c.length;s++)a=c[s],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(l)},n=self["webpackChunk_3d_fps"]=self["webpackChunk_3d_fps"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(6040)}));n=o.O(n)})();
//# sourceMappingURL=app.6471e3c4.js.map